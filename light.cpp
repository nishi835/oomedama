/*==============================================================================

    scene3Dの処理 [scene2D.cpp]
                                                       作成者 : 中西　祐介
                                                       作成日 : 2016/4/17
--------------------------------------------------------------------------------
    ■Update : 
==============================================================================*/

/*------------------------------------------------------------------------------
  　ヘッダファイル
------------------------------------------------------------------------------*/
#include "main.h"
#include "light.h"
#include "renderer.h"

//=============================================================================
// コンストラクタ
//=============================================================================
CLight::CLight()
{
}

//=============================================================================
// デストラクタ
//=============================================================================
CLight::~CLight()
{
}

//=============================================================================
// 初期化処理
//=============================================================================
void CLight::Init( void )
{		
	// ライトの初期化 ////////////////////////////////////////////	

	LPDIRECT3DDEVICE9 pDevice = CRenderer::GetDevice();	

	D3DLIGHT9 light;									  // ライトの構造体
	ZeroMemory( &light, sizeof( D3DLIGHT9 ) );			  // 構造体の初期化

	light.Type		   = D3DLIGHT_DIRECTIONAL;					// ライトのタイプ 
	light.Diffuse	   = D3DXCOLOR( 1.0f, 1.0f, 1.0f, 1.0f );   // ライト(平行光源）のカラー(1.0fが100%）
	light.Ambient	   = D3DXCOLOR( 0.8f, 0.8f, 0.8f, 1.0f );   // 環境光
	D3DXVECTOR3 vecDir = D3DXVECTOR3( 1.0f, -1.0f, 0.0f );		// ライト(平行光源）の向き

	// ライトベクトルを単位ベクトル化
	D3DXVec3Normalize( ( D3DXVECTOR3* )&light.Direction,   
					   &vecDir
					   );

	// デバイスにライトを設定
	pDevice->SetLight( 0, 
					   &light
					   );

	// ライトのスイッチ
	pDevice->LightEnable( 0,
						  TRUE
						  );

	// アンビエントライトの設定
	pDevice->SetRenderState( D3DRS_AMBIENT, 0x00202020 );

}

//=============================================================================
// ポリゴンの終了処理
//=============================================================================
void CLight::Uninit( void )
{
	
}

//=============================================================================
// ポリゴンの更新処理
//=============================================================================
void CLight::Update( void )
{
}

//=============================================================================
// 作成
//=============================================================================
CLight* CLight::Create( void )
{
	CLight* pLight = new CLight();
	pLight->Init();

	return pLight;
}
