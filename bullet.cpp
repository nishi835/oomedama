/*==============================================================================

bulletの処理 [bullet.cpp]
作成者 : 中西　祐介
作成日 :
--------------------------------------------------------------------------------
■Update :
==============================================================================*/

/*------------------------------------------------------------------------------
　ヘッダファイル
 ------------------------------------------------------------------------------*/
#include "main.h"
#include "modeGame.h"
#include "textureManager.h"
#include "renderer.h"
#include "bullet.h"
#include "camera.h"
#include "light.h"

/*------------------------------------------------------------------------------
　マクロ定義
------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------
　デストラクタ
------------------------------------------------------------------------------*/
CBullet::~CBullet()
{
}

/*------------------------------------------------------------------------------
　初期化
------------------------------------------------------------------------------*/
void CBullet::Init(void)
{
	// ビルボードの初期化
	CBillboard::Init();

	// オブジェクトタイプの設定
	SetObjType(OBJTYPE_NONE);
}

/*------------------------------------------------------------------------------
　終了処理
------------------------------------------------------------------------------*/
void CBullet::Uninit(void)
{
	CBillboard::Uninit();
	CScene::SetDelete();
}

/*------------------------------------------------------------------------------
　更新
 ------------------------------------------------------------------------------*/
void CBullet::Update(void)
{
	if (m_use)
	{
		m_pos += m_velocity;
	}
}

/*------------------------------------------------------------------------------
　ポリゴン描画処理
 ------------------------------------------------------------------------------*/
void CBullet::Draw(void)
{
	if (m_use)
	{
		CBillboard::Draw();
	}
}

/*------------------------------------------------------------------------------
　作成
 ------------------------------------------------------------------------------*/
CBullet* CBullet::Create(D3DXVECTOR3 pos, D3DXVECTOR3 size, D3DXVECTOR3 velocity, bool use,  char* filePass,  CTextureManager::TEXTYPE textype)
{
	CBullet* pBullet = new CBullet(CScene::PRIORITY_BILLBOARD);

	// 初期化
	pBullet->SetPos(pos);
	pBullet->SetSize(size);
	pBullet->SetVelocity(velocity);
	pBullet->SetDeltaRot(0.0f);
	pBullet->SetUse(use);

	// テクスチャIDの設定
	pBullet->m_TexID = CTextureManager::GetTexID(textype);
	pBullet->Init();

	return pBullet;
}

